# 2023/24 Champions League Simulator
Hello there and welcome to this little program I made in Python - this program simulates the 2023/24 UEFA Champions League. It includes all the teams and rounds from the group stage to the final, and it assesses the relative strength of the teams to randomly predict the results between the teams.

# How it works
To start with, I've created a 'Team' class for all the teams, initalised with the following fields:
  1. name
  2. rating
  3. country

The name field is easy enough to explain, its the name of the team e.g. "Real Madrid", "Manchester City". The rating field, I've set this from 1 to 5, the strongest teams will have a rating of 1 and the weakest teams will have a rating of 5. So 'Real Madrid' have a rating of 1 whilst 'FC Crvena Zvezda' have a rating of 5. This rating will be used later to determine the results between the two teams. Finally, the country field, this just tells you what country that team are from. So Real Madrid's country is set to 'ESP' for Spain while Manchester City's country is set to 'ENG' for England. This country field will be important later as it will be used during the knockout draw, so that the program won't draw two teams from the same country together.

There are other fields in the class, there's "played", "won", "drew", "lost", "goalsfor", "goalsagainst" "goaldifference" and "points". These will all be used to calculate which teams finish in what position in the group stages, and determine who advances to the knockout rounds. All these fields are set to 0 at the start of the program.

Once I've created the Team class and added all 32 participating teams, I've sorted them all into eight different groups, these are 8 lists called groupA, groupB.....all the way to groupH. All eight lists contain 4 teams, in the exact groups they were drawn in real life. So groupA contains the teams 'Bayern Munich', 'Manchester United', 'FC Copenhagen' and 'Galatasaray'.

# Group Tables
After creating the teams and groups, I added some functions to display the tables in the program: group_table() and show_groups(). group_table() creates a table showing the teams and their current games played, won, drawn, lost, goals for, goals against, goal difference and points as in real life; at the start of the program all of these are set to 0 as I said but as we play the fixtures, the values for each of those fields will change and the table will be updated to sort the teams in order of points followed by goal difference.

The show_groups() function calls the group_table() function for all eight groups, and will display at the start of the program, and again after every matchday of the group stage has been completed.

# Match Days
Onto the fixtures themselves, for the group stages I've created six functions, called matchday_one(), matchday_two() and so on; this just creates a list of the fixtures for that week and sets the order of the teams so that they are matched up against their opponents for that week. So for example, matchday_one() has a line that will append the team at groupA[0] and groupA[1] together, in this case Bayern Munich and Manchester United; who are both scheduled to play together in the first matchday. All the fixtures are added this way, and then the functions return that list of matches for the next part of the program, the match function.

For the group stage, I've created a function called play_group_matches, which calls the list of matches that are created from the six different matchday functions. This will simulate each of the fixtures for that matchday. The results for this will be determined by the team's rating first and foremost, and also depending on which team is the 'home team' for that fixture. So for example, 'Manchester City' are playing 'RB Leipzig' at home. Manchester City's rating is set to 1, and RB Leipzig is set to 3, so in the event that the home.rating == 1 and away.rating == 3, this will be presnted in an if clause that leads to a score being generated for both teams based on that matchup.

Manchester City's rating is 1, so their goals will be represented as a random choice from a list of variables, in this case the list is [0, 1, 1, 2, 3, 4]. RB Leipzig's rating is 3, so their list of variables will be [0, 0, 1, 1, 2, 3]. The computer selects a random choice from each of these two lists and that will be the score given to both teams, so for example the computer might pick '3' for Manchester City, and pick '1' from Leipzig's list, so that would mean the score for that game is Manchester City 3-1 RB Leipzig. Since the values for Manchester City are higher than the values for RB Leipzig in both lists, that means there is a higher probability for Manchester City to win than RB Leipzig. That makes sense, since Manchester City are a better rated team and are playing at home.

But what happens if the teams playing are more evenly matched? Let's say it's 'Borussia Dortmund' vs 'AC Milan'; both teams have a rating of 2 so are pretty evenly matched. In that event Dortmund's list of variables is [0, 1, 1, 2, 3, 4] and Milan's will be [0, 1, 1, 2, 2, 3]; though Dortmund still have an advantage as they can score a maximum of 4 goals compared to Milan scoring a maximum of 3 goals from their list; there is more of a chance that Milan can get a better result than Dortmund even as the away team. This rule also extends to teams with a lower rating playing at home to higher ranked teams; they have a better possibility of getting a result than they would be doing as the away team.

So that's sort of how the matches work, the computer goes through each of the fixtures for that matchday, gives a scoreline and then this will update the goals and points for the teams playing as well. So if Bayern Munich beat Manchester United 2-0; Bayern Munich's wins will be += 1, their goals for += 2 as well as the goal difference, and their total points will be += 3. Manchester United's on the other hand will have goals against of += 2, goal difference of -= 2 and losses += 1, no points for a loss will be added. If FC Porto and Shakhtar Donetsk draw 1-1, both their goalsfor and goals against are += 1, draws are +=1, and their points will be += 1 since it's 1 point for a draw in real life.

That's roughly how the group stage matches work, the tables will update after each fixture with the updated results, and this will continue for all six matchdays, then the group stage is completed.

# Knockout Rounds
Once the group stage is complete, i've created two functions called find_group_winners_and_runners_up() and show_group_winners(). The program determines which teams are 1st and 2nd in each of the eight groups, and adds them both to a list of group_winners and runners_up; the show_group_winners() function simply prints these two lists on screen.

This will then lead to the draw for the last 16 round of fixtures, and this is reflected in a function called last16_draw() that takes in the two lists of group_winners and runners_up. The two lists are randomly drawn to create a fixture list of eight matches each for the last 16 teams remaining. Now, in real life, the rules are that two teams from the same country can't be drawn together in the last 16; so I've added some code there that will reshuffle the remaining teams in the list again so that they don't have the same team.country value. This should ensure in a draw of fixtures similar to real life; so each of the runners up are drawn against the group winners.

Once that is done, the knockout games will commence. I've used a function called play_knockout_matches() that takes in the drawn list of fixtures; the code used to determine the results is similar to how it was for the group stage, except this time the fixtures are two-legged, both teams play home and away; so I've altered the code slightly so that it will take the first leg results and the second leg results to create the aggregate score; the team with the higher aggregate score advances to the next round. Of course there is also the event that both teams have the same aggregate score at the end, so extra-time will also be determined, both teams have the chance to score an additional goal or two, or maybe not. If the two teams are still tied at the end, then penalties decide the outcome of the tie; both teams penalty scores will be a choice from a list of [0, 1, 2, 3, 4, 5], if one team's score = 5; then the other team's penalty score will be [3, 4, 5] since it is impossible for a shootout to end 5-0 in real life. If both teams have penalty scores of 4-4 or 5-5 then there will be a loop that gives the chance for both teams to add another goal until it gets to the point where one team scores and the other misses, just like in 'sudden death' in the penalty shootout.

Once the round of 16 is done, then the remaining 8 teams are drawn together for the quarter-finals, this uses another function called knockout_draw() as now it is possible for teams from the same country to be drawn together. The quarter-finals then follow the same format for the matches as the last 16, and then the winners there are drawn in the semi-finals, then the two winners of that will play in the final. It's pretty straightforward the knockout stages, just that in the final the game is played at a neutral venue so the probability for picking the scores will be different than it is for the home/away ties we've been using up to this point.

Once the final is played, you should have a nice little graphic come up on screen displaying the European Cup Trophy and a message thanking the user for playing. And there you go, that's the program all done!

# Summary
That's pretty much everything I think, I hope you have fun with the program. I've tried to make the scores and the teams as balanced as possible, realistic enough that the big teams should be winning most of the time, but in real life there is always the element of surprise. I've simulated all the rounds several times, and while the teams in the latter stages are mostly the ones you would expect like Bayern Munich and Manchester City, there is always the chance a team like Celtic or Real Sociedad might pull off some surprises. That to me, that's the magic of knockout football, the results don't always go according to what was planned. Anyway, I hope you enjoy this program, have some fun with it. There were a few ideas I'd like to implement maybe down the line, like maybe randomising the groups and maybe also allowing the user to select their own teams; so teams like 'Liverpool' and 'Ajax' who aren't in this year's Champions League, the user has the option to put them in the 32 teams instead. We shall see, but for now, enjoy!
